CREATE TABLE public.power_stations (
  ps_name text,
  latitude real,
  longitude real,
  install_date timestamp,
  ps_location text,
  total_capacity_unit text,
  total_capacity_value real,
  ps_id integer NOT NULL,
  connect_type text,
  CONSTRAINT power_stations_pkey PRIMARY KEY (ps_id)
);
CREATE TABLE public.devices (
  type_name text,
  ps_key text NOT NULL,
  firmware_version_info text,
  device_type integer,
  factory_name text,
  uuid integer,
  grid_connection_date timestamp,
  device_name text,
  dev_fault_status integer,
  device_model_id integer,
  communication_dev_sn text,
  device_model_code text,
  chnnl_id integer,
  rel_time timestamp,
  device_sn text,
  dev_status integer,
  rel_state integer,
  device_code integer,
  ps_id integer,
  CONSTRAINT devices_pkey PRIMARY KEY (ps_key),
  CONSTRAINT devices_ps_id_fkey FOREIGN KEY (ps_id) REFERENCES public.power_stations(ps_id)
);
CREATE TABLE public.combiner_measures (
  timestamp timestamp,
  device text,
  interior_temperature real,
  dc_bus_voltage real,
  total_dc_power real,
  total_dc_current real,
  ipv_1 real,
  ipv_2 real,
  ipv_3 real,
  ipv_4 real,
  ipv_5 real,
  ipv_6 real,
  ipv_7 real,
  ipv_8 real,
  ipv_9 real,
  ipv_10 real,
  ipv_11 real,
  ipv_12 real,
  ipv_13 real,
  ipv_14 real,
  ipv_15 real,
  ipv_16 real,
  ipv_17 real,
  ipv_18 real,
  ipv_19 real,
  ipv_20 real,
  ipv_21 real,
  ipv_22 real,
  ipv_23 real,
  ipv_24 real,
  CONSTRAINT combiner_measures_pkey PRIMARY KEY (timestamp, device),
  CONSTRAINT combiner_measures_device_fkey FOREIGN KEY (device) REFERENCES public.devices(ps_key)
);
CREATE TABLE public.inverter_measures (
  timestamp timestamp,
  device text,
  total_active_power real,
  total_dc_power real,
  total_apparent_power real,
  phase_a_current real,
  phase_b_current real,
  phase_c_current real,
  array_insulation_resistance real,
  total_operation_time real,
  a_b_line_voltage real,
  b_c_line_voltage real,
  c_a_line_voltage real,
  bus_voltage real,
  internal_air_temperature real,
  mppt1_voltage real,
  mppt2_voltage real,
  mppt3_voltage real,
  mppt4_voltage real,
  mppt5_voltage real,
  mppt6_voltage real,
  mppt7_voltage real,
  mppt8_voltage real,
  mppt9_voltage real,
  mppt10_voltage real,
  mppt11_voltage real,
  mppt12_voltage real,
  mppt1_current real,
  string_1_current real,
  string_2_current real,
  string_3_current real,
  string_4_current real,
  string_5_current real,
  string_6_current real,
  string_7_current real,
  string_8_current real,
  string_9_current real,
  string_10_current real,
  string_11_current real,
  string_12_current real,
  string_13_current real,
  string_14_current real,
  string_15_current real,
  string_16_current real,
  string_17_current real,
  string_18_current real,
  string_19_current real,
  string_20_current real,
  string_21_current real,
  string_22_current real,
  string_23_current real,
  string_24_current real,
  CONSTRAINT inverter_measures_pkey PRIMARY KEY (timestamp, device),
  CONSTRAINT inverter_measures_device_fkey FOREIGN KEY (device) REFERENCES public.devices(ps_key)
);
CREATE TABLE public.yield_daily (
  date date NOT NULL,
  device text NOT NULL,
  yield_today real,
  CONSTRAINT yield_daily_pkey PRIMARY KEY (date, device),
  CONSTRAINT yield_daily_device_fkey FOREIGN KEY (device) REFERENCES public.devices(ps_key)
);
